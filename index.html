<!DOCTYPE html><html><head><title>Learn You sms-server-notifications-rails For Much Win</title><style>body, html {
  height:100%;
  width:100%;
  padding:0;
  margin:0;
  overflow:hidden;
  background-color:#ddd;
}
.wrapper {
  height:100%;
  width:100%;
}</style><link rel="shortcut icon" href="//twilio.com/bundles/marketing/img/favicons/favicon.ico"><link rel="apple-touch-icon" href="//twilio.com/bundles/marketing/img/favicons/favicon_57.png"><link rel="apple-touch-icon" sizes="72x72" href="//twilio.com/bundles/marketing/img/favicons/favicon_72.png"><link rel="apple-touch-icon" sizes="114x114" href="//twilio.com/bundles/marketing/img/favicons/favicon_114.png"><link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css"><link rel="stylesheet" href="viewsaurus.css"></head><body><div class="wrapper"><div id="viewsaurus" data-title="Learn You sms-server-notifications-rails For Much Win"><div class="saurus-panes"><div class="saurus-prose"><div class="saurus-prose-header"><div class="title-outer"><span class="step-title">Learn You sms-server-notifications-rails For Much Win</span></div></div><div class="saurus-nav-buttons"><div class="saurus-nav-button nav-overview"><div class="saurus-nav-button-inner"><i class="fa fa-fw fa-list"></i></div><div class="nav-divider"></div></div><div class="saurus-nav-button nav-previous"><div class="saurus-nav-button-inner"><a href=""> <i class="fa fa-fw fa-play fa-rotate-180"></i></a></div><div class="nav-divider"></div></div><div class="saurus-nav-button nav-next clickable"><div class="saurus-nav-button-inner"><a href="#1"> <i class="fa fa-fw fa-play"></i></a></div></div><div class="saurus-next-title"><span class="next-title-inner"></span></div></div><div class="saurus-progress-bar"></div><div class="saurus-start"><p>Thanks for writing a tutorial with Viewsaurus! This example tutorial will show you the basic functionality of Viewsaurus. Click the &quot;Start&quot; button below to see how Viewsaurus works.</p><a href="#0">Start Tutorial</a></div><div class="saurus-content"><div data-title="Server Notifications &amp; Alerts" class="chapter"><div data-title="App Flow" class="step"><h2 id="server-notifications-flow">Server Notifications Flow</h2>
<ul>
<li>Something happens on your server</li>
<li>An SMS alert is sent to all Administrators</li>
</ul>
<p>Click the next arrow to continue.</p>
</div><div data-title="User Story: Administrator" data-file="db/schema.rb" class="step"><h2>User Story: Administrator</h2><blockquote>As an Administrator I would like to sign up to receive alerts.</blockquote><p>Requirements:</p>
<ul>
<li>an <code>Administrator</code> model object with a <code>:phone_number</code> attribute</li>
<li>a web form to sign up </li>
<li>a controller to render that web form</li>
</ul>
</div><div data-title="The Administrator Model" data-file="db/schema.rb" class="step"><h2 id="the-schema">The Schema</h2>
<ul>
<li>Requires <code>:phone_number</code></li>
</ul>
</div><div data-title="The Web Form" data-file="app/views/administrators/new.html.erb" class="step"><h2 id="form-for-the-administrator-resource">Form for the Administrator resource</h2>
<ul>
<li>The rails <a href="http://guides.rubyonrails.org/form_helpers.html#binding-a-form-to-an-object">form_for</a> tag automatically updates the named resource. In this case the Administrator.</li>
<li>A simple <code>:phone_number</code> field is all we need</li>
</ul>
</div><div data-title="Administrator Controller" data-file="app/controllers/administrators_controller.rb" data-highlight="6-14, 18-22" class="step"><h2 id="creating-an-administrator">Creating an Administrator</h2>
<ul>
<li>This controller creates a new Administrator with the <a href="http://api.rubyonrails.org/classes/ActionController/Parameters.html">accepted params</a></li>
<li>If the new model is <a href="http://api.rubyonrails.org/classes/ActiveRecord/Validations.html#method-i-valid-3F">valid</a> then redirect to the <a href="http://guides.rubyonrails.org/routing.html#naming-routes">home_path</a></li>
</ul>
</div><div data-title="Sending Alerts" data-file="app/controllers/notifications_controller.rb" class="step"><h2>User Story:</h2><blockquote>As an Administrator, I would like to trigger a "test" server event, via a web interface.</blockquote><p>Requirements:</p>
<ul>
<li>a button to trigger the fake server event</li>
<li>a controller to trigger the sms alert</li>
<li>a function that sends an sms using Twilio</li>
</ul>
</div><div data-title="Notifications Controller" data-file="app/controllers/notifications_controller.rb" data-highlight="1-20" class="step"><h2 id="the-trigger-controller">The trigger controller</h2>
<p>This controller does a few things:</p>
<ul>
<li>defines a message, this could be dynamically generated</li>
<li>gets an image, this could be a screenshot from <a href="http://newrelic.com/">New Relic</a> or some other server monitor</li>
<li>loops through all <code>Administrators</code> and calls <code>send_message</code></li>
<li>flashes a message to the user</li>
</ul>
</div><div data-title="The Message Controller" data-file="app/controllers/notifications_controller.rb" data-highlight="27-39" class="step"><h2 id="sending-and-sms">Sending and SMS</h2>
<p>This controller does a few things:</p>
<ul>
<li>pulls a few <a href="http://ruby-doc.org/core-2.1.4/ENV.html">environment variables</a></li>
<li>initiates the <a href="http://twilio-ruby.readthedocs.org/en/latest/usage/basics.html#authentication">Twilio REST client</a></li>
<li><a href="https://www.twilio.com/docs/quickstart/ruby/sms/sending-via-rest">sends a Text Message</a> using the REST API</li>
</ul>
</div><div data-title="Trigger Button" data-file="app/views/notifications/index.html.erb" class="step"><h2 id="triggering-the-test-alert">Triggering the test alert</h2>
<p>A simple bootstrap styled button that will make a GET request to &#39;/trigger&#39;.</p>
</div><div data-title="Finish" class="step"></div><h2 id="all-done-">All Done!</h2>
<p>That&#39;s it! We&#39;ve just implemented an automated server notification system that can send you server alerts if anything goes wrong.</p>
<p>Thanks for checking out this tutorial! If you have any feedback to share with us, we&#39;d love to hear it. Tweet <a href="http://twitter.com/twilio">@twilio</a> to let us know what you think.</p>
</div>
<div class="saurus-files" style="display:none;"><textarea class="saurus-file" data-file="db/schema.rb" data-mode="ruby">IyBlbmNvZGluZzogVVRGLTgKIyBUaGlzIGZpbGUgaXMgYXV0by1nZW5lcmF0ZWQgZnJvbSB0aGUgY3VycmVudCBzdGF0ZSBvZiB0aGUgZGF0YWJhc2UuIEluc3RlYWQKIyBvZiBlZGl0aW5nIHRoaXMgZmlsZSwgcGxlYXNlIHVzZSB0aGUgbWlncmF0aW9ucyBmZWF0dXJlIG9mIEFjdGl2ZSBSZWNvcmQgdG8KIyBpbmNyZW1lbnRhbGx5IG1vZGlmeSB5b3VyIGRhdGFiYXNlLCBhbmQgdGhlbiByZWdlbmVyYXRlIHRoaXMgc2NoZW1hIGRlZmluaXRpb24uCiMKIyBOb3RlIHRoYXQgdGhpcyBzY2hlbWEucmIgZGVmaW5pdGlvbiBpcyB0aGUgYXV0aG9yaXRhdGl2ZSBzb3VyY2UgZm9yIHlvdXIKIyBkYXRhYmFzZSBzY2hlbWEuIElmIHlvdSBuZWVkIHRvIGNyZWF0ZSB0aGUgYXBwbGljYXRpb24gZGF0YWJhc2Ugb24gYW5vdGhlcgojIHN5c3RlbSwgeW91IHNob3VsZCBiZSB1c2luZyBkYjpzY2hlbWE6bG9hZCwgbm90IHJ1bm5pbmcgYWxsIHRoZSBtaWdyYXRpb25zCiMgZnJvbSBzY3JhdGNoLiBUaGUgbGF0dGVyIGlzIGEgZmxhd2VkIGFuZCB1bnN1c3RhaW5hYmxlIGFwcHJvYWNoICh0aGUgbW9yZSBtaWdyYXRpb25zCiMgeW91J2xsIGFtYXNzLCB0aGUgc2xvd2VyIGl0J2xsIHJ1biBhbmQgdGhlIGdyZWF0ZXIgbGlrZWxpaG9vZCBmb3IgaXNzdWVzKS4KIwojIEl0J3Mgc3Ryb25nbHkgcmVjb21tZW5kZWQgdGhhdCB5b3UgY2hlY2sgdGhpcyBmaWxlIGludG8geW91ciB2ZXJzaW9uIGNvbnRyb2wgc3lzdGVtLgoKQWN0aXZlUmVjb3JkOjpTY2hlbWEuZGVmaW5lKHZlcnNpb246IDIwMTUwMzE4MTgwMjMxKSBkbwoKICAjIFRoZXNlIGFyZSBleHRlbnNpb25zIHRoYXQgbXVzdCBiZSBlbmFibGVkIGluIG9yZGVyIHRvIHN1cHBvcnQgdGhpcyBkYXRhYmFzZQogIGVuYWJsZV9leHRlbnNpb24gInBscGdzcWwiCgogIGNyZWF0ZV90YWJsZSAiYWRtaW5pc3RyYXRvcnMiLCBmb3JjZTogOmNhc2NhZGUgZG8gfHR8CiAgICB0LnN0cmluZyAgICJwaG9uZV9udW1iZXIiCiAgICB0LmRhdGV0aW1lICJjcmVhdGVkX2F0IiwgICBudWxsOiBmYWxzZQogICAgdC5kYXRldGltZSAidXBkYXRlZF9hdCIsICAgbnVsbDogZmFsc2UKICBlbmQKCmVuZAo=</textarea>
<textarea class="saurus-file" data-file="app/views/administrators/new.html.erb" data-mode="html_ruby">PGRpdiBjbGFzcz0iY29udGFpbmVyIj4KICA8aDE+Q3JlYXRlIGEgbmV3IEFkbWluaXN0cmF0b3I8L2gxPgogIDwlIGlmIEBhZG1pbmlzdHJhdG9yLmVycm9ycy5hbnk/ICU+CiAgICA8aDI+T29wcywgc29tZXRoaW5nIHdlbnQgd3JvbmchPC9oMj4KCiAgICA8dWw+CiAgICAgIDwlIEBhZG1pbmlzdHJhdG9yLmVycm9ycy5mdWxsX21lc3NhZ2VzLmVhY2ggZG8gfGVycm9yfCAlPgogICAgICAgIDxsaT48JT0gZXJyb3IgJT48L2xpPgogICAgICA8JSBlbmQgLSU+CiAgICA8L3VsPgogIDwlIGVuZCAtJT4KCiAgPCU9IGZvcm1fZm9yIEBhZG1pbmlzdHJhdG9yIGRvIHxmfCAlPgogICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+CiAgICAgIDwlPSBmLmxhYmVsIDpwaG9uZV9udW1iZXIgJT4KICAgICAgPCU9IGYudGV4dF9maWVsZCA6cGhvbmVfbnVtYmVyLCBjbGFzczogImZvcm0tY29udHJvbCIsIGlkOiAicGhvbmVfbnVtYmVyIiAlPgogICAgPC9kaXY+CiAgICA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLXByaW1hcnkiPlNpZ24gdXA8L2J1dHRvbj4KICA8JSBlbmQgLSU+CjwvZGl2Pg==</textarea>
<textarea class="saurus-file" data-file="app/controllers/administrators_controller.rb" data-mode="ruby">Y2xhc3MgQWRtaW5pc3RyYXRvcnNDb250cm9sbGVyIDwgQXBwbGljYXRpb25Db250cm9sbGVyCiAgZGVmIG5ldwogICAgQGFkbWluaXN0cmF0b3IgPSBBZG1pbmlzdHJhdG9yLm5ldwogIGVuZAoKICBkZWYgY3JlYXRlCiAgICBAYWRtaW5pc3RyYXRvciA9IEFkbWluaXN0cmF0b3IuY3JlYXRlKHVzZXJfcGFyYW1zKQogICAgaWYgQGFkbWluaXN0cmF0b3IudmFsaWQ/CiAgICAgIHJlZGlyZWN0X3RvIGhvbWVfcGF0aAogICAgZWxzZQogICAgICByZW5kZXIgOm5ldwogICAgICBmbGFzaC5ub3dbOmRhbmdlcl0gPSBAYWRtaW5pc3RyYXRvci5lcnJvcnMuZnVsbF9tZXNzYWdlcwogICAgZW5kCiAgZW5kCgogIHByaXZhdGUKCiAgZGVmIHVzZXJfcGFyYW1zCiAgICBwYXJhbXMucmVxdWlyZSg6YWRtaW5pc3RyYXRvcikucGVybWl0KAogICAgICA6cGhvbmVfbnVtYmVyCiAgICApCiAgZW5kCgplbmQ=</textarea>
<textarea class="saurus-file" data-file="app/controllers/notifications_controller.rb" data-mode="ruby">Y2xhc3MgTm90aWZpY2F0aW9uc0NvbnRyb2xsZXIgPCBBcHBsaWNhdGlvbkNvbnRyb2xsZXIKCiAgZGVmIHRyaWdnZXJfc21zX2FsZXJ0cwogICAgQGFsZXJ0X21lc3NhZ2UgPSAiW1RoaXMgaXMgYSB0ZXN0XSBBTEVSVCEgSXQgYXBwZWFycyB0aGUgc2VydmVyIGlzIGhhdmluZyBpc3N1ZXMuIEVycm9yIENvZGU6IDUwMC4gR28gdG86IGh0dHA6Ly9uZXdyZWxpYy5jb20gZm9yIG1vcmUgZGV0YWlscy4iCiAgICBAaW1hZ2VfdXJsID0gImh0dHA6Ly9ob3d0b2RvY3MuczMuYW1hem9uYXdzLmNvbS9uZXctcmVsaWMtbW9uaXRvci5wbmciCgogICAgQWRtaW5pc3RyYXRvci5hbGwuZWFjaCBkbyB8YWRtaW58CiAgICAgIGJlZ2luCgogICAgICAgIHBob25lX251bWJlciA9IGFkbWluLnBob25lX251bWJlcgogICAgICAgIHNlbmRfbWVzc2FnZShwaG9uZV9udW1iZXIsIEBhbGVydF9tZXNzYWdlLCBAaW1hZ2VfdXJsKQogICAgICAgIGZsYXNoWzpzdWNjZXNzXSA9ICJNZXNzYWdlcyBvbiB0aGVpciB3YXkhIgogICAgICByZXNjdWUKCiAgICAgICAgZmxhc2hbOmFsZXJ0XSA9ICJTb21ldGhpbmcgd2hlbiB3cm9uZy4iCiAgICAgIGVuZAogICAgZW5kCgogICAgcmVkaXJlY3RfdG8gJy8nCiAgZW5kCgogIGRlZiBpbmRleAogIGVuZAoKICBwcml2YXRlCgogICAgZGVmIHNlbmRfbWVzc2FnZShwaG9uZV9udW1iZXIsIGFsZXJ0X21lc3NhZ2UsIGltYWdlX3VybCkKCiAgICAgIEB0d2lsaW9fbnVtYmVyID0gRU5WWydUV0lMSU9fTlVNQkVSJ10KICAgICAgQGNsaWVudCA9IFR3aWxpbzo6UkVTVDo6Q2xpZW50Lm5ldyBFTlZbJ1RXSUxJT19BQ0NPVU5UX1NJRCddLCBFTlZbJ1RXSUxJT19BVVRIX1RPS0VOJ10KICAgICAgCiAgICAgIG1lc3NhZ2UgPSBAY2xpZW50LmFjY291bnQubWVzc2FnZXMuY3JlYXRlKAogICAgICAgIDpmcm9tID0+IEB0d2lsaW9fbnVtYmVyLAogICAgICAgIDp0byA9PiBwaG9uZV9udW1iZXIsCiAgICAgICAgOmJvZHkgPT4gYWxlcnRfbWVzc2FnZSwKICAgICAgICA6bWVkaWFfdXJsID0+IGltYWdlX3VybAogICAgICApCiAgICAgIHB1dHMgbWVzc2FnZS50bwogICAgZW5kCgplbmQK</textarea>
<textarea class="saurus-file" data-file="app/views/notifications/index.html.erb" data-mode="html_ruby">PGgxPlNNUyBTZXJ2ZXIgTm90aWZpY2F0aW9uczwvaDE+CjxwPlVzZSB0aGlzIGZvcm0gdG8gdGVzdCBzZW5kaW5nIHNlcnZlciBub3RpZmljYXRpb25zIHRvIGFsbCBhZG1pbmlzdHJhdG9ycy48L3A+CjxkaXYgY2xhc3M9InJvdyI+CiAgPGRpdiBjbGFzcz0icGFuZWwgd2VsbCBjb2wtbWQtNiI+CiAgPGEgY2xhc3M9ImJ0biBidG4tc3VjY2VzcyBidG4tbGcgYnRuLWJsb2NrIiBocmVmPSIvdHJpZ2dlciI+U2VuZCBUZXN0PC9hPgogIDxocj4KICA8cD4gT3IgPGEgaHJlZj0iL2FkbWluaXN0cmF0b3JzL25ldyI+Y3JlYXRlIGFuIGFkbWluaXN0cmF0b3I8L2E+IHRvIGdldCBzdGFydGVkLjwvcD4KICA8L2Rpdj4KPC9kaXY+</textarea>
</div>
</div><div class="saurus-overview"><ul></ul></div></div><div class="saurus-code"><div class="file-path"><span class="crumb-container"></span><i class="fa fa-fw fa-folder"></i></div><div class="saurus-editor"></div></div><div class="saurus-explorer"><div class="saurus-file-list"></div></div></div></div></div><script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/backbone.js/1.1.2/backbone-min.js"></script><script src="ace/ace.js"></script><script src="ace/theme-monokai.js"></script><script src="viewsaurus.js"></script></body></html>